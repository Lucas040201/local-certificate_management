define("local_certificate_management/course",["exports","core/templates","local_certificate_management/utils","local_certificate_management/repository"],(function(_exports,_templates,_utils,_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_templates=_interopRequireDefault(_templates),_utils=_interopRequireDefault(_utils),_repository=_interopRequireDefault(_repository);const getParams=async root=>({limit:Number(root.attr("data-limit")),page:Number(root.attr("data-page")),search:root.find("#search-param").val()||"",sort:root.find("#order-param").val()||""}),courseComponents_notFound="local_certificate_management/components/course/table-row-not-found",courseComponents_empty="local_certificate_management/components/course/table-row-empty",courseComponents_content="local_certificate_management/components/course/table-row",loadCourses=async function(root){let seeMore=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const params=await getParams(root),data=await _repository.default.retrieveCourses(params);let templateToLoad=courseComponents_content;seeMore||data.courses.length||params.search||(templateToLoad=courseComponents_empty),seeMore||data.courses.length||!params.search||(_utils.default.disableButton(root),templateToLoad=courseComponents_notFound),seeMore||(root.find(".courses-content").empty(),root.find(".total-courses").text(0));const html=await _templates.default.render(templateToLoad,{courses:data.courses});root.find(".total-courses").text(data.total),root.find(".courses-content").append(html);const coursesLength=root.find(".courses-item").length;data.total===coursesLength?_utils.default.disableButton(root):root.find(".see_more").hasClass("hidden")&&data.total>coursesLength&&_utils.default.activeButton(root)}catch(error){root.find(".courses-content").empty(),root.find(".total-courses").text(0);const html=await _templates.default.render(courseComponents_empty,{});_utils.default.disableButton(root),root.find(".courses-content").append(html)}};var _default={init:async root=>{let timeout;await loadCourses(root),root.find("#search-param").on("keyup",(e=>{clearTimeout(timeout),timeout=setTimeout((async()=>{await loadCourses(root)}),2e3)})),root.find("#order-param").on("change",(async event=>{await loadCourses(root)})),root.find(".see_more").on("click",(async function(){const newPage=Number(root.attr("data-page"))+1;root.attr("data-page",newPage),await loadCourses(root,!0)}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=course.min.js.map